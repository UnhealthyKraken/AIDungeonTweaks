<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>AI Dungeon Tweaks Settings</title>
    <link rel="stylesheet" href="styles.css">
    <script src="popup.js" defer></script>
</head>
<body id="popup-root">
    <h2 class="popup-title">
        <img src="logo.gif" alt="Logo" />
        AI Dungeon Tweaks
    </h2>

    <!-- Tab Navigation -->
    <div class="tab-navigation">
        <button class="tab-button active" data-tab="1" data-i18n="tabActions">Actions</button>
        <button class="tab-button" data-tab="2" data-i18n="tabTextFormatting">Text Formatting</button>
        <button class="tab-button" data-tab="3" data-i18n="tabMisc">Miscellaneous</button>
        <div class="tab-indicator"></div>
    </div>

    <!-- Tab Content -->
    <div class="tab-content">
        <!-- Tab 1: Actions -->
        <div class="tab-panel active" id="tab-1">
            <details class="setting-group" open>
        <summary class="group-summary" data-i18n="groupActions">Actions:</summary>
        <details class="setting-group" open>
            <summary class="group-summary" data-i18n="groupDo">Do:</summary>
            <div class="setting-item">
                <label for="doBold" data-i18n="labelBold">Bold:</label>
                <label class="toggle-switch">
                    <input type="checkbox" id="doBold">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="setting-item">
                <label for="doColor" data-i18n="labelColor">Color:</label>
                <select id="doColor">
                    <option value="inherit" data-i18n="optDefault">Default</option>
                    <option value="#000000" data-i18n="colorBlack">Black</option>
                    <option value="#0066cc" data-i18n="colorBlue">Blue</option>
                    <option value="#96ceb4" data-i18n="colorGreen">Green</option>
                    <option value="#45b7d1" data-i18n="colorLightBlue">Light Blue</option>
                    <option value="#ff9ff3" data-i18n="colorPink">Pink</option>
                    <option value="#ff6b6b" data-i18n="colorRed">Red</option>
                    <option value="#4ecdc4" data-i18n="colorTeal">Teal</option>
                    <option value="#feca57" data-i18n="colorYellow">Yellow</option>
                    <option value="#ffffff" data-i18n="colorWhite">White</option>
                    <option value="custom" data-i18n="optCustom">Custom…</option>
                </select>
                <div class="color-swatches" id="doColorSwatches"></div>
                <button class="reset-btn" id="doColorReset" title="Reset">↺</button>
            </div>
        </details>
        <details class="setting-group" open>
            <summary class="group-summary" data-i18n="groupSay">Say:</summary>
            <div class="setting-item">
                <label for="sayBold" data-i18n="labelBold">Bold:</label>
                <label class="toggle-switch">
                    <input type="checkbox" id="sayBold">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="setting-item">
                <label for="sayColor" data-i18n="labelColor">Color:</label>
                <select id="sayColor">
                    <option value="inherit" data-i18n="optDefault">Default</option>
                    <option value="#000000" data-i18n="colorBlack">Black</option>
                    <option value="#0066cc" data-i18n="colorBlue">Blue</option>
                    <option value="#96ceb4" data-i18n="colorGreen">Green</option>
                    <option value="#45b7d1" data-i18n="colorLightBlue">Light Blue</option>
                    <option value="#ff9ff3" data-i18n="colorPink">Pink</option>
                    <option value="#ff6b6b" data-i18n="colorRed">Red</option>
                    <option value="#4ecdc4" data-i18n="colorTeal">Teal</option>
                    <option value="#feca57" data-i18n="colorYellow">Yellow</option>
                    <option value="#ffffff" data-i18n="colorWhite">White</option>
                    <option value="custom" data-i18n="optCustom">Custom…</option>
                </select>
                <div class="color-swatches" id="sayColorSwatches"></div>
                <button class="reset-btn" id="sayColorReset" title="Reset">↺</button>
            </div>
        </details>
        <div class="setting-item">
            <button class="reset-btn reset-btn--label" id="resetActions" title="Reset Actions Section" data-i18n="resetActions">↺ Reset Actions</button>
        </div>
            </details>
        </div>

        <!-- Tab 2: Text Formatting -->
        <div class="tab-panel" id="tab-2">
            <details class="setting-group" open>
        <summary class="group-summary" data-i18n="groupTextFormatting">Text Formatting:</summary>
        <details class="setting-group" open>
            <summary class="group-summary" data-i18n="groupAllCaps">All Caps Effects</summary>
            <div class="setting-item">
                <label for="capsEffect" data-i18n="labelEffect">Effect:</label>
                <select id="capsEffect">
                    <option value="none" data-i18n="effNone">None</option>
                    <option value="flash" data-i18n="effFlash">Flash</option>
                    <option value="strobe" data-i18n="effStrobe">Strobe</option>
                    <option value="rainbow" data-i18n="effRainbow">Rainbow</option>
                    <option value="wave" data-i18n="effWave">Wave</option>
                    <option value="breathe" data-i18n="effBreathe">Breathe</option>
                </select>
            </div>
        </details>
        <details class="setting-group" open>
            <summary class="group-summary" data-i18n="groupFont">Font</summary>
            <div class="setting-item">
                <label for="fontFamily" data-i18n="labelFontFamily">Font Family</label>
                <select id="fontFamily">
                    <option value="inherit" data-i18n="optDefault">Default</option>
                    <option value="Georgia, serif">Georgia</option>
                    <option value="'Times New Roman', Times, serif">Times New Roman</option>
                    <option value="'Palatino Linotype', 'Book Antiqua', Palatino, serif">Palatino</option>
                    <option value="Arial, Helvetica, sans-serif">Arial</option>
                    <option value="'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Segoe UI</option>
                    <option value="'Courier New', Courier, monospace">Courier New</option>
                    <option value="'Fira Code', Menlo, Monaco, 'Courier New', monospace">Fira Code</option>
                    <option value="g:Inter">Inter</option>
                    <option value="g:Open Sans">Open Sans</option>
                    <option value="g:Lato">Lato</option>
                    <option value="g:Montserrat">Montserrat</option>
                    <option value="g:Merriweather">Merriweather</option>
                    <option value="g:EB Garamond">EB Garamond</option>
                    <option value="g:Source Sans 3">Source Sans 3</option>
                    <option value="g:Source Serif 4">Source Serif 4</option>
                    <option value="g:Source Code Pro">Source Code Pro</option>
                    <option value="g:JetBrains Mono">JetBrains Mono</option>
                    <option value="g:Noto Sans">Noto Sans</option>
                    <option value="g:Noto Serif">Noto Serif</option>
                    <option value="g:IBM Plex Sans">IBM Plex Sans</option>
                    <option value="g:IBM Plex Serif">IBM Plex Serif</option>
                    <option value="g:IBM Plex Mono">IBM Plex Mono</option>
                    <option value="g:Atkinson Hyperlegible">Atkinson Hyperlegible</option>
                    <option value="g:Manrope">Manrope</option>
                    <option value="g:Nunito">Nunito</option>
                    <option value="g:PT Serif">PT Serif</option>
                    <option value="g:PT Sans">PT Sans</option>
                    <option value="g:Crimson Pro">Crimson Pro</option>
                    <option value="g:Bitter">Bitter</option>
                    <option value="g:Literata">Literata</option>
                    <option value="g:DM Sans">DM Sans</option>
                </select>
            </div>
            <div class="setting-item">
                <label for="fontSize" data-i18n="labelFontSize">Font Size <span id="fontSizeValue"></span></label>
                <div>
                    <input type="range" id="fontSize" min="12" max="28" step="1" value="16" />
                </div>
                <button class="reset-btn" id="fontSizeReset" title="Reset">↺</button>
            </div>
            <div class="setting-item">
                <label for="fontWeight" data-i18n="labelFontWeight">Font Weight</label>
                <select id="fontWeight">
                    <option value="" data-i18n="optWeightDefault">Default</option>
                    <option value="400" data-i18n="optWeightRegular">Regular</option>
                    <option value="500" data-i18n="optWeightMedium">Medium</option>
                    <option value="700" data-i18n="optWeightBold">Bold</option>
                </select>
                <button class="reset-btn" id="fontWeightReset" title="Reset">↺</button>
            </div>
            <div class="setting-item">
                <label for="lineHeight" data-i18n="labelLineHeight">Line Height <span id="lineHeightValue"></span></label>
                <div>
                    <input type="range" id="lineHeight" min="0.8" max="2.2" step="0.05" value="1.5" />
                </div>
                <button class="reset-btn" id="lineHeightReset" title="Reset">↺</button>
            </div>
            <div class="setting-item">
                <label for="letterSpacing" data-i18n="labelLetterSpacing">Letter Spacing <span id="letterSpacingValue"></span></label>
                <div>
                    <input type="range" id="letterSpacing" min="-0.5" max="2" step="0.1" value="0" />
                </div>
                <button class="reset-btn" id="letterSpacingReset" title="Reset">↺</button>
            </div>
            <div class="setting-item">
                <label for="textAlign" data-i18n="labelTextAlign">Text Alignment</label>
                <select id="textAlign">
                    <option value="inherit" data-i18n="optAlignDefault">Default</option>
                    <option value="left" data-i18n="optAlignLeft">Left</option>
                    <option value="justify" data-i18n="optAlignJustify">Justify</option>
                </select>
                <button class="reset-btn" id="textAlignReset" title="Reset">↺</button>
            </div>
            <div class="setting-item">
                <button class="reset-btn reset-btn--label" id="resetFont" title="Reset Font Section">↺ Reset Font</button>
            </div>
        </details>
        <details class="setting-group" open>
            <summary class="group-summary" data-i18n="groupMonologue">Internal Monologue:</summary>
            <div class="setting-item">
                <label for="monologueBold" data-i18n="labelBold">Bold:</label>
                <label class="toggle-switch">
                    <input type="checkbox" id="monologueBold">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="setting-item">
                <label for="monologueColor" data-i18n="labelColor">Color:</label>
                <select id="monologueColor">
                    <option value="inherit" data-i18n="optDefault">Default</option>
                    <option value="#000000">Black</option>
                    <option value="#0066cc">Blue</option>
                    <option value="#96ceb4">Green</option>
                    <option value="#45b7d1">Light Blue</option>
                    <option value="#ff9ff3">Pink</option>
                    <option value="#ff6b6b">Red</option>
                    <option value="#4ecdc4">Teal</option>
                    <option value="#feca57">Yellow</option>
                    <option value="#ffffff">White</option>
                    <option value="custom" data-i18n="optCustom">Custom…</option>
                </select>
                <div class="color-swatches" id="monologueColorSwatches"></div>
                <button class="reset-btn" id="monologueColorReset" title="Reset">↺</button>
            </div>
        </details>
        <details class="setting-group" open>
            <summary class="group-summary" data-i18n="groupKeywords">Keywords</summary>
            <div class="setting-item">
                <label for="keywordInput" data-i18n="labelAddKeyword">Add keyword</label>
                <div>
                    <input type="text" id="keywordInput" placeholder="e.g. dragon" />
                </div>
                <button class="reset-btn reset-btn--label" id="addKeyword" title="Add" data-i18n="buttonAdd">＋ Add</button>
            </div>
            <div id="keywordsList"></div>
        </details>
        <details class="setting-group" open>
            <summary class="group-summary" data-i18n="groupMainText">Main Text:</summary>
            <div class="setting-item">
                <label for="mainBold" data-i18n="labelBold">Bold:</label>
                <label class="toggle-switch">
                    <input type="checkbox" id="mainBold">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="setting-item">
                <label for="mainColor" data-i18n="labelColor">Color:</label>
                <select id="mainColor">
                    <option value="inherit" data-i18n="optDefault">Default</option>
                    <option value="#000000">Black</option>
                    <option value="#0066cc">Blue</option>
                    <option value="#96ceb4">Green</option>
                    <option value="#45b7d1">Light Blue</option>
                    <option value="#ff9ff3">Pink</option>
                    <option value="#ff6b6b">Red</option>
                    <option value="#4ecdc4">Teal</option>
                    <option value="#feca57">Yellow</option>
                    <option value="#ffffff">White</option>
                    <option value="custom" data-i18n="optCustom">Custom…</option>
                </select>
                <div class="color-swatches" id="mainColorSwatches"></div>
                <button class="reset-btn" id="mainColorReset" title="Reset">↺</button>
            </div>
        </details>
        <details class="setting-group" open>
            <summary class="group-summary" data-i18n="groupSpeech">Speech</summary>
            <div class="setting-item">
                <label for="speechBold" data-i18n="labelBold">Bold:</label>
                <label class="toggle-switch">
                    <input type="checkbox" id="speechBold" checked>
                    <span class="slider"></span>
                </label>
            </div>
            <div class="setting-item">
                <label for="speechColor" data-i18n="labelColor">Color:</label>
                <select id="speechColor">
                    <option value="inherit" data-i18n="optDefault">Default</option>
                    <option value="#000000">Black</option>
                    <option value="#0066cc">Blue</option>
                    <option value="#96ceb4">Green</option>
                    <option value="#45b7d1">Light Blue</option>
                    <option value="#ff9ff3">Pink</option>
                    <option value="#ff6b6b">Red</option>
                    <option value="#4ecdc4">Teal</option>
                    <option value="#feca57">Yellow</option>
                    <option value="#ffffff">White</option>
                    <option value="custom" data-i18n="optCustom">Custom…</option>
                </select>
                <div class="color-swatches" id="speechColorSwatches"></div>
                <button class="reset-btn" id="speechColorReset" title="Reset">↺</button>
            </div>
        </details>
        <div class="setting-item">
            <button class="reset-btn reset-btn--label" id="resetTextFormatting" title="Reset Text Formatting Section" data-i18n="resetTextFormatting">↺ Reset Text Formatting</button>
        </div>
            </details>
        </div>

        <!-- Tab 3: Miscellaneous -->
        <div class="tab-panel" id="tab-3">
            <details class="setting-group" open>
        <summary class="group-summary" data-i18n="groupMisc">Miscellaneous:</summary>
        <details class="setting-group" open>
            <summary class="group-summary" data-i18n="groupBackground">Background</summary>
            <div class="setting-item">
                <label for="bgType" data-i18n="labelBgType">Background Type</label>
                <select id="bgType">
                    <option value="inherit" data-i18n="optDefault">Default</option>
                    <option value="solid" data-i18n="optBGTypeSolid">Solid color</option>
                    <option value="gradient" data-i18n="optBGTypeGradient">Linear gradient</option>
                </select>
                <button class="reset-btn" id="bgTypeReset" title="Reset" data-i18n-title="titleReset">↺</button>
            </div>
            <div class="setting-item">
                <label for="bgColor" data-i18n="labelBgColor">Solid color</label>
                <input type="color" id="bgColor" value="#101010" />
                <button class="reset-btn" id="bgColorReset" title="Reset" data-i18n-title="titleReset">↺</button>
            </div>
            <div class="setting-item">
                <label for="bgGrad" data-i18n="labelBgGrad">Gradient (CSS)</label>
                <div>
                    <input type="text" id="bgGrad" placeholder="e.g. linear-gradient(135deg, #0f0, #00f)" />
                </div>
                <button class="reset-btn" id="bgGradReset" title="Reset" data-i18n-title="titleReset">↺</button>
            </div>
        </details>
        <details class="setting-group" open>
            <summary class="group-summary" data-i18n="groupExportImport">Export / Import</summary>
            <div class="setting-item">
                <label data-i18n="labelExportImport">Backup or restore settings</label>
                <div></div>
                <div style="display:flex; gap:8px;">
                    <button class="reset-btn reset-btn--label" id="exportSettings" data-i18n="buttonExport">Export</button>
                    <button class="reset-btn reset-btn--label" id="importSettings" data-i18n="buttonImport">Import</button>
                </div>
            </div>
        </details>
        <details class="setting-group" open>
            <summary class="group-summary" data-i18n="groupLanguage">Language</summary>
            <div class="setting-item">
                <label for="langSelect" data-i18n="labelLanguage">Language override</label>
                <select id="langSelect">
                    <option value="" data-i18n="langAuto">Auto (Browser)</option>
                    <option value="en">English</option>
                    <option value="es">Español</option>
                    <option value="de">Deutsch</option>
                    <option value="fr">Français</option>
                    <option value="pt_BR">Português (Brasil)</option>
                    <option value="ru">Русский</option>
                    <option value="zh_CN">简体中文</option>
                    <option value="hi">हिन्दी</option>
                    <option value="ar">العربية</option>
                    <option value="ja">日本語</option>
                    <option value="ko">한국어</option>
                    <option value="it">Italiano</option>
                    <option value="tr">Türkçe</option>
                    <option value="id">Bahasa Indonesia</option>
                </select>
            </div>
        </details>
        <details class="setting-group" open>
            <summary class="group-summary" data-i18n="groupProfiles">Profiles</summary>
            <div class="setting-item">
                <label for="profileSelect" data-i18n="labelProfile">Profile</label>
                <select id="profileSelect"></select>
                <button class="reset-btn reset-btn--label" id="saveProfile" data-i18n="buttonSaveProfile">Save as New</button>
            </div>
            <div class="setting-item" id="profilesActionsRow">
                <label></label>
                <div id="profilesActions" class="profiles-actions">
                    <button class="reset-btn reset-btn--label profiles-delete-btn" id="deleteProfile" data-i18n="buttonDeleteProfile">Delete Profile</button>
                </div>
            </div>
        </details>
        <details class="setting-group" open>
            <summary class="group-summary" data-i18n="groupSync">Sync</summary>
            <div class="setting-item">
                <label for="syncToggle" data-i18n="labelSync">Sync settings across devices</label>
                <label class="toggle-switch">
                    <input type="checkbox" id="syncToggle">
                    <span class="slider"></span>
                </label>
            </div>
        </details>
            </details>
        <details class="setting-group">
            <summary class="group-summary" data-i18n="groupDebug">Debug</summary>
            <div class="setting-item">
                <label for="debugToggle">Enable debug logs</label>
                <label class="toggle-switch">
                    <input type="checkbox" id="debugToggle">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="setting-item">
                <label for="debugFormatting">Formatting logs</label>
                <label class="toggle-switch">
                    <input type="checkbox" id="debugFormatting">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="setting-item">
                <label for="debugObserver">Observer/flow logs</label>
                <label class="toggle-switch">
                    <input type="checkbox" id="debugObserver">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="setting-item">
                <label for="debugUI">UI integration logs</label>
                <label class="toggle-switch">
                    <input type="checkbox" id="debugUI">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="setting-item">
                <label data-i18n="labelResetAll">Reset all settings</label>
                <div></div>
                <button class="reset-btn reset-btn--label" id="resetAll" title="Reset All Settings" data-i18n="buttonResetAll">↺ Reset All</button>
            </div>
            <div class="setting-item" id="contrastWarnings"></div>

            

        </div>
    </div>

    
</body>
</html>
